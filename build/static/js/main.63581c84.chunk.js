(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){},44:function(e,t,a){e.exports=a(77)},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(38),l=a.n(i),s=a(12),c=(a(53),a(54),a(55),a(20)),o=a(40),u=a(29);function d(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length?parseInt(t.pop().split(";").shift(),10):-1}var m={item:{login:d("login_state"),user_id:d("user_id")}},h=Object(c.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_POST":case"LOGOUT_POST":return Object(u.a)({},e,{item:t.payload});default:return e}}}),g=[o.a],b=Object(c.e)(h,{},Object(c.d)(c.a.apply(void 0,g))),p=a(19),v=a(21),f=(a(56),a(57),a(58),a(59),a(60),a(6)),E=a(9),y=a(8),C=a(4),N=a(7),O=a(1),x=(a(61),function(e){var t=e.route,a=t.name,n=t.url,i=t.homeCardProperty.cardColor;return r.a.createElement(p.b,{className:"home-card home-card-".concat(i),to:n},r.a.createElement("div",{className:"home-card-icon"},r.a.createElement("i",{className:"fas fa-hamburger fa-4x"})),r.a.createElement("span",{className:"home-card-name"},a))}),I=Object(s.b)(function(e){return{login:e.login.item.login}})(function(e){var t=e.login;return r.a.createElement("div",{className:"grid grid-tem-col-1-1-1 grid-gap-20px"},Ie.filter(function(e){return e.showOnHome&&e.level>=t}).map(function(e){return r.a.createElement(x,{key:e.url,route:e})}))}),k=a(10),L=a(2),S=a.n(L),w=a(3),j=a(31),M="http://warteg-dev.herokuapp.com/graphql";var D=new j.GraphQLClient(M,{headers:{authorization:"Bearer ".concat(function(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length?t.pop().split(";").shift():""}("jwtToken"))}}),T=new j.GraphQLClient(M),U=D;a(70);function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"is-success",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=document.getElementById("global-message"),n=document.getElementById("global-message-body"),r=document.createElement("ul");t.length>0&&t.forEach(function(e){var t=document.createElement("li");t.innerHTML=e,r.appendChild(t)}),n.innerHTML="",n.appendChild(r),a.classList="message ".concat(e),a.classList.toggle("message-open"),setTimeout(function(){a.classList.toggle("message-open")},2e3)}var $=function(){return r.a.createElement("article",{id:"global-message",className:"message is-success"},r.a.createElement("div",{id:"global-message-body",className:"message-body"}))},F=a(32),_=function(e){function t(){var e;Object(f.a)(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];e=Object(y.a)(this,Object(C.a)(t).call(this,n));var i=n[0];return e.name="ValidationError",e.errors=i,e}return Object(N.a)(t,e),t}(Object(F.a)(Error)),q=(Object(F.a)(Error),function(e){try{return JSON.parse(JSON.stringify(e,void 0)).response.errors[0].message}catch(t){return}}),A=function(e){var t=[];if(q(e))t.push(q(e));else if(e.response){var a=e.response,n=a.status,r=a.statusText;t.push("".concat(n," ").concat(r))}else if(e instanceof _){t=e.errors}else t.push(e);return t},Y=function(e){var t=e.image;return r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image is-4by3"},r.a.createElement("img",{src:t||"https://bulma.io/images/placeholders/1280x960.png",alt:"Placeholder"})))},H=function(e){var t=e.item,a=e.handleAddOrder,n=e.handleSubtractOrder;return r.a.createElement("div",{className:"component-card-content m-t-1"},r.a.createElement("div",{className:"m-b-1"},r.a.createElement("p",null,t.name),r.a.createElement("span",null,t.harga)),r.a.createElement("div",{className:"flex flex-align-center m-b-1"},r.a.createElement("button",{className:"button is-info flex-3-col",type:"button",onClick:function(){return a(t)}},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("input",{name:"quantity","data-parent":"item",className:"input has-text-centered flex-6-col flex-offset-1-col",type:"number",value:t.quantity,readOnly:!0}),r.a.createElement("button",{className:"button is-danger flex-3-col flex-offset-1-col",type:"button",onClick:function(){return n(t)}},r.a.createElement("i",{className:"fas fa-minus"}))))},B=(a(71),function(e){var t=e.SelectedCategoryMenu,a=e.handleChange,n=e.handleAddOrder,i=e.handleSubtractOrder;return t.map(function(e){return r.a.createElement("div",{className:"component-card",key:e.id},r.a.createElement(Y,{image:e.image||"https://bulma.io/images/placeholders/64x64.png"}),r.a.createElement(H,{item:e,handleChange:a,handleAddOrder:n,handleSubtractOrder:i}))})}),G=(a(72),function(e){var t=e.children;return r.a.createElement("aside",{className:"menu"},t)}),R=a(18),z=a.n(R),K=(a(73),function(e){var t=e.item,a=e.handleDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement("figure",{className:"image is-64x64 order-item-image"},r.a.createElement("img",{src:t.image||"https://bulma.io/images/placeholders/64x64.png",alt:"order-item",onClick:function(){a(t)}})),r.a.createElement("span",{className:"order-item-name is-size-7"},t.name),r.a.createElement("span",{className:"order-item-quantity is-size-7"},"Qty: ",t.quantity))}),W=function(e){var t=e.isLoading,a=e.selectedTableId,n=e.ListTable,i=e.ListCategory,l=e.OrderList,s=e.handleChange,c=e.handleSubmitOrder,o=e.handleDeleteOrder,u=e.handleDeleteAllOrder,d=0,m=0;return l.filter(function(e){return e.quantity>0}).length>0&&(m=l.map(function(e){return e.quantity*e.price}).reduce(function(e,t){return e+t}),d=l.map(function(e){return e.quantity}).reduce(function(e,t){return e+t})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"select is-fullwidth is-small"},r.a.createElement("select",{name:"selectedTableId",onChange:s,value:a},n.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("p",{className:"menu-label is-size-5"},"Order List"),r.a.createElement("div",{className:"order-container"},i.length>0?i.map(function(e){return r.a.createElement(r.a.Fragment,{key:"key-".concat(e.id)},l.filter(function(t){return t.category_id===e.id}).length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"menu-label"},e.name),r.a.createElement("ul",{className:"menu-list order-list",key:"group-".concat(e.id)},l.filter(function(t){return t.category_id===e.id}).map(function(t){return r.a.createElement("li",{className:"order-item",key:"child-".concat(e.id,"-").concat(t.id)},r.a.createElement(K,{item:t,handleDelete:o}))}))):r.a.createElement(r.a.Fragment,null))}):r.a.createElement(r.a.Fragment,null)),l.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"is-divider"}),r.a.createElement("p",null,"Items count: ",d),r.a.createElement("p",null,"Total: ",z()(m).format("0,0")),r.a.createElement("button",{type:"button",className:t?"button is-success is-fullwidth m-t-1 is-loading":"button is-success is-fullwidth m-t-1",disabled:t,onClick:c},"Submit"),r.a.createElement("button",{type:"button",className:"button is-fullwidth m-t-1",onClick:u},"Clear")):r.a.createElement(r.a.Fragment,null))},J=(a(74),function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("div",{className:"loading"},"Loading"))}),Q=a(24),V=a.n(Q),X=(a(36),a(37),function(){var e=Object(w.a)(S.a.mark(function e(t){var a,n,r,i,l,s,c,o,u;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"\n      query ($invoiceId: ID!) {\n        invoice(id: $invoiceId) {\n          discount,\n          total,\n          invoice_details {\n            quantity,\n            menu {\n              name,\n              price\n            }\n          }\n        }\n      }\n    ",e.next=3,U.request("\n      query ($invoiceId: ID!) {\n        invoice(id: $invoiceId) {\n          discount,\n          total,\n          invoice_details {\n            quantity,\n            menu {\n              name,\n              price\n            }\n          }\n        }\n      }\n    ",{invoiceId:t});case 3:a=e.sent,n=a.invoice,r=n.total,i=n.invoice_details,l=0,s=i.map(function(e){var t=e.menu.price,a=e.quantity,n=e.menu.name,r=[],i="";return n.split(" ").forEach(function(e){i.length+e.length>=18&&(r.push(i),l+=15,i=""),i+="".concat(e," ")}),l+=28,r.push(i),{menuName:r,menuQuantity:a,menuTotal:t*e.quantity}}),c=52+l>=80?52+l:80,(o=new V.a("p","mm",[c,76])).setFontSize(6),o.setTextColor("#000"),o.setFontStyle("bold"),o.text("Warteg Modern",4,5),o.setFontSize(6),o.setTextColor("#808080"),o.setFontStyle("normal"),o.text("Masakan Mother",4,9),o.setFontSize(6),o.setTextColor("#000"),o.setFont("courier"),u=16,s.forEach(function(e){var t=e.menuName,a=e.menuQuantity,n=e.menuTotal;t.forEach(function(e){o.setFontStyle("bold"),o.text("".concat(e),2,u),u+=4}),o.setFontStyle("normal"),o.text("".concat(a,"x"),2,u),o.text("Rp ".concat(z()(n).format("0,0")),25,u,"right"),u+=6}),o.text("Total",2,u),o.text("Rp ".concat(z()(r).format("0,0")),25,u,"right"),window.open(o.output("bloburl"),"_blank");case 27:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Z=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(C.a)(t).call(this,e))).state={isLoading:!1,activeTab:0,selectedTableId:0,ListCategory:[],ListTable:[],ListMenu:[]},a.handleChange=a.handleChange.bind(Object(O.a)(Object(O.a)(a))),a.handleSelectTab=a.handleSelectTab.bind(Object(O.a)(Object(O.a)(a))),a.handleAddOrder=a.handleAddOrder.bind(Object(O.a)(Object(O.a)(a))),a.handleSubtractOrder=a.handleSubtractOrder.bind(Object(O.a)(Object(O.a)(a))),a.handleDeleteOrder=a.handleDeleteOrder.bind(Object(O.a)(Object(O.a)(a))),a.handleSubmitOrder=a.handleSubmitOrder.bind(Object(O.a)(Object(O.a)(a))),a.handleDeleteAllOrder=a.handleDeleteAllOrder.bind(Object(O.a)(Object(O.a)(a))),a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,t=this.props.match.params.invoiceId,e.next=5,this.bindMasterTable();case 5:return e.next=7,this.bindMasterOrder(t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),P("is-danger",A(e.t0));case 12:this.setState({isLoading:!1});case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"setOrder",value:function(e,t){var a=this.state.ListMenu,n=a.findIndex(function(e){return e.id===t.id}),r=a.filter(function(e){return e.id===t.id})[0];"add"===e?r.quantity+=1:"subtract"===e&&r.quantity>0?r.quantity-=1:"remove"===e&&window.confirm("Hapus ".concat(t.name,"?"))&&(r.quantity=0),a[n]=r,this.setState({ListMenu:a})}},{key:"bindMasterTable",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return'\n      {\n        tablesConnection(isActive: true, sortBy: { field: "name", order: "asc" }) {\n          tables {\n            id,\n            name\n          }\n        }\n      }\n    ',e.next=3,U.request('\n      {\n        tablesConnection(isActive: true, sortBy: { field: "name", order: "asc" }) {\n          tables {\n            id,\n            name\n          }\n        }\n      }\n    ');case 3:t=e.sent,a=t.tablesConnection.tables,this.setState({selectedTableId:a[0].id,ListTable:a});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"bindMasterOrder",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i,l,s,c,o,u=arguments;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:null,a="\n      {\n        categoriesConnection(isActive: true) {\n          categories {\n            id,\n            name\n          }\n        },\n        menusConnection(isActive: true) {\n          menus {\n            id,\n            name,\n            price,\n            image,\n            category {\n              id\n            }\n          }\n        }\n      }",e.next=4,U.request(a);case 4:if(n=e.sent,r=n.categoriesConnection.categories,i=n.menusConnection.menus,l=i.map(function(e){return{id:e.id,name:e.name,price:e.price,image:e.image,quantity:0,category_id:e.category.id}}),s=r.sort(function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)}),c=s[0].id,!t){e.next=17;break}return a="\n        query ($invoiceId: ID!){\n          invoice (id: $invoiceId) {\n            invoice_details {\n              quantity,\n              menu {\n                id\n              }\n            }\n          }\n        }\n      ",e.next=14,U.request(a,{invoiceId:t});case 14:o=e.sent,o.invoice.invoice_details.forEach(function(e){var t=l.map(function(e){return e.id}).indexOf(e.menu.id);l[t].quantity=e.quantity});case 17:this.setState({activeTab:c,ListCategory:s,ListMenu:l});case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"handleSelectTab",value:function(e){this.setState({activeTab:e.id})}},{key:"handleAddOrder",value:function(e){this.setOrder("add",e)}},{key:"handleSubtractOrder",value:function(e){this.setOrder("subtract",e)}},{key:"handleDeleteOrder",value:function(e){this.setOrder("remove",e)}},{key:"handleSubmitOrder",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i,l,s,c,o,u;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,t=this.state,a=t.selectedTableId,n=t.ListMenu,r=this.props,i=r.match.params.invoiceId,l=r.user_id,s=n.filter(function(e){return e.quantity>0}).map(function(e){return{menu_id:parseInt(e.id,10),quantity:parseInt(e.quantity,10)}}),c=i?"\n        mutation UpdateInvoice($invoiceId: ID!, $discount: Int!, $userId: ID!, $invoiceDetail: [InvoiceDetailInput]!, $invoiceTable: [InvoiceTableInput]!) {\n          updateInvoice(id: $invoiceId, discount: $discount, userId: $userId, invoiceDetail: $invoiceDetail, invoiceTable: $invoiceTable) {id}\n        }\n      ":"\n        mutation CreateInvoice($discount: Int!, $userId: ID!, $invoiceDetail: [InvoiceDetailInput]!, $invoiceTable: [InvoiceTableInput]!) {\n          createInvoice(discount: $discount, userId: $userId, invoiceDetail: $invoiceDetail, invoiceTable: $invoiceTable) {id}\n        }\n      ",e.next=8,U.request(c,{invoiceId:i,userId:l,discount:0,invoiceDetail:s,invoiceTable:[{table_id:a}]});case 8:return o=e.sent,i?X(i):(u=o.createInvoice.id,X(u)),e.next=12,this.bindMasterOrder();case 12:P("is-success",[i?"Berhasil mengupdate order":"Berhasil menambah order"]),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),P("is-danger",A(e.t0));case 18:this.setState({isLoading:!1});case 19:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleDeleteAllOrder",value:function(){var e=this.state.ListMenu;e=e.map(function(e){return{category_id:e.category_id,id:e.id,name:e.name,price:e.price,quantity:0}}),this.setState({ListMenu:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.activeTab,i=t.selectedTableId,l=t.ListCategory,s=t.ListTable,c=t.ListMenu,o=c.filter(function(e){return e.quantity>0}),u=c.filter(function(e){return e.category_id===n});return r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex-11-col flex-force-max"},r.a.createElement("div",{className:"tabs"},r.a.createElement("ul",null,l.length>0?l.map(function(t){return r.a.createElement("li",{className:t.id===n?"is-active":"",key:t.id,onClick:function(){return e.handleSelectTab(t)}},r.a.createElement("a",null,t.name))}):r.a.createElement(r.a.Fragment,null))),r.a.createElement("section",{className:"grid grid-gap-20px grid-tem-col-1-1-1 card-container"},u.length>0?r.a.createElement(B,{SelectedCategoryMenu:u,handleChange:this.handleChange,handleAddOrder:this.handleAddOrder,handleSubtractOrder:this.handleSubtractOrder}):a?r.a.createElement(J,null):"No Data")),r.a.createElement("div",{className:"flex-5-col m-l-1"},r.a.createElement(G,null,r.a.createElement(W,{isLoading:a,selectedTableId:i,ListTable:s,ListCategory:l,OrderList:o,handleChange:this.handleChange,handleSubmitOrder:this.handleSubmitOrder,handleDeleteOrder:this.handleDeleteOrder,handleDeleteAllOrder:this.handleDeleteAllOrder}))))}}]),t}(n.Component),ee=Object(s.b)(function(e){return{user_id:e.login.item.user_id}})(Z),te=a(14),ae=a.n(te),ne=function(e){var t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.ListInvoice,s=e.handlePaging;return r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No Invoice"),r.a.createElement("th",null,"Date Time"),r.a.createElement("th",null,"Total"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,l.length>0?l.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.invoice_date),r.a.createElement("td",null,z()(e.total-e.total*e.discount).format("0,0")),r.a.createElement("td",null,r.a.createElement(p.b,{className:"button is-info",to:"order/invoiceId=".concat(e.id)},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("button",{type:"button",className:"button is-link m-l-1",onClick:function(){return X(e.id)}},r.a.createElement("i",{className:"fa fa-print"}))))}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},t?r.a.createElement(J,null):"No data"))),i>n?r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"4"},r.a.createElement("nav",{className:"pagination",role:"navigation","aria-label":"pagination"},0!==a?r.a.createElement("button",{type:"button",className:"pagination-previous",onClick:function(){s("prev")}},"Previous"):r.a.createElement(r.a.Fragment,null),(a+1)*n<i?r.a.createElement("button",{type:"button",className:"pagination-next",onClick:function(){s("next")}},"Next"):r.a.createElement(r.a.Fragment,null))))):r.a.createElement(r.a.Fragment,null))},re=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(y.a)(this,Object(C.a)(t).call(this))).state={isLoading:!1,pagingIndex:0,pagingCount:10,totalCount:0,ListInvoice:[]},e.handlePaging=e.handlePaging.bind(Object(O.a)(Object(O.a)(e))),e}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i,l,s,c,o;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pagingIndex,n=t.pagingCount,this.setState({isLoading:!0}),e.prev=2,r="\n        {\n          invoicesConnection(first: ".concat(n,", offset: ").concat(a*n,', isActive: true, sortBy: { field: "id", order: "desc" }) {\n            totalCount,\n            invoices {\n              id,\n              discount,\n              total,\n              created_date,\n              modified_date\n            }\n          }\n        }\n      '),e.next=6,U.request(r);case 6:i=e.sent,l=i.invoicesConnection,s=l.totalCount,c=l.invoices,o=c.map(function(e){return{id:e.id,discount:e.discount,total:e.total,invoice_date:ae()(e.modified_date||e.created_date,"x").format("DD/MM/YYYY hh:mm A")}}),this.setState({totalCount:s,ListInvoice:o}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),P("is-danger",A(e.t0));case 17:this.setState({isLoading:!1});case 18:case"end":return e.stop()}},e,this,[[2,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"handlePaging",value:function(e){var t=this.state,a=t.pagingCount,n=t.totalCount,r=this.state.pagingIndex;"next"===e&&(r+1)*a<n?r+=1:"prev"===e&&0!==r&&(r-=1),this.setState({pagingIndex:r})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.ListInvoice;return r.a.createElement("div",null,r.a.createElement(ne,{isLoading:t,pagingIndex:a,pagingCount:n,totalCount:i,ListInvoice:l,handlePaging:this.handlePaging}))}}]),t}(n.Component),ie=function(e){return!RegExp("^[1-9][0-9]*[.]?[0-9]*$").test(e)},le=function(e){return!RegExp(".+").test(e)},se=function(e){var t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.ListCategory,s=e.bindCategory,c=e.handlePaging;return r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Category Name"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,l.length>0?l.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"button is-info",onClick:function(){return s(e)}},r.a.createElement("i",{className:"fas fa-pencil-alt"}))))}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},t?r.a.createElement(J,null):"No data"))),i>n?r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},r.a.createElement("nav",{className:"pagination",role:"navigation","aria-label":"pagination"},0!==a?r.a.createElement("button",{type:"button",className:"pagination-previous",onClick:function(){c("prev")}},"Previous"):r.a.createElement(r.a.Fragment,null),(a+1)*n<i?r.a.createElement("button",{type:"button",className:"pagination-next",onClick:function(){c("next")}},"Next"):r.a.createElement(r.a.Fragment,null))))):r.a.createElement(r.a.Fragment,null))},ce=function(e){var t=e.isLoading,a=e.categoryId,n=e.categoryName,i=e.handleChange,l=e.handleSubmit,s=e.handleDelete,c=e.handleClear;return r.a.createElement("form",{autoComplete:"off"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"categoryName",className:"label"},"Nama Kategori"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"categoryName",className:"input",type:"text",placeholder:"Nama Kategori",value:n,onChange:i}))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:t?"button is-success is-loading":"button is-success",type:"submit",disabled:t||""===n,onClick:l},a>0?"Update":"Submit"),a>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:t?"button is-danger is-loading":"button is-danger",type:"submit",disabled:t,onClick:s},"Delete"),r.a.createElement("button",{className:t?"button is-loading":"button",type:"button",onClick:c},"Cancel")):r.a.createElement(r.a.Fragment,null)))},oe=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(y.a)(this,Object(C.a)(t).call(this))).state={isLoading:!1,pagingIndex:0,pagingCount:5,totalCount:0,categoryId:0,categoryName:"",ListCategory:[]},e.bindCategory=e.bindCategory.bind(Object(O.a)(Object(O.a)(e))),e.handleChange=e.handleChange.bind(Object(O.a)(Object(O.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(O.a)(Object(O.a)(e))),e.handleDelete=e.handleDelete.bind(Object(O.a)(Object(O.a)(e))),e.handleClear=e.handleClear.bind(Object(O.a)(Object(O.a)(e))),e.handlePaging=e.handlePaging.bind(Object(O.a)(Object(O.a)(e))),e}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,this.bindMasterCategory();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),P("is-danger",A(e.t0));case 9:this.setState({isLoading:!1});case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"bindMasterCategory",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i,l,s,c;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pagingIndex,n=t.pagingCount,this.setState({ListCategory:[]}),r="\n    {\n      categoriesConnection(first: ".concat(n,", offset: ").concat(a*n,", isActive: true) {\n        totalCount,\n        ListCategory: categories{\n          id,\n          name\n        }\n      }\n    }"),e.next=5,U.request(r);case 5:i=e.sent,l=i.categoriesConnection,s=l.totalCount,c=l.ListCategory,this.setState({totalCount:s,ListCategory:c});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"bindCategory",value:function(e){this.setState({categoryId:e.id,categoryName:e.name})}},{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),e.prev=1,t=this.state,a=t.categoryId,n=t.categoryName,r=a>0?"\n            mutation UpdateCategory($categoryId: ID!, $categoryName: String!) {\n              updateCategory(id: $categoryId, name: $categoryName) {id}\n            }\n          ":"\n            mutation CreateCategory($categoryName: String!){\n              createCategory(name: $categoryName) {id}\n            }\n          ",i=[],le(n)&&i.push("Nama menu tidak boleh kosong"),!(i.length>0)){e.next=8;break}throw new _(i);case 8:return e.next=10,U.request(r,{categoryId:parseInt(a,10),categoryName:n});case 10:return e.next=12,this.bindMasterCategory();case 12:P("is-success",["Kategori berhasil ".concat(a>0?"diupdate":"ditambah")]),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),P("is-danger",A(e.t0));case 18:this.setState({isLoading:!1});case 19:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),e.prev=1,t=this.state.categoryId,a="\n        mutation DeleteCategory($categoryId: ID!) {\n          deleteCategory(id: $categoryId) {id}\n        }\n      ",n=[],ie(t)&&n.push("Error Category Id"),!(n.length>0)){e.next=8;break}throw new _(n);case 8:return e.next=10,U.request(a,{categoryId:parseInt(t,10)});case 10:return e.next=12,this.bindMasterCategory();case 12:this.handleClear(),P("is-warning",["Kategori berhasil dihapus"]),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),P("is-danger",A(e.t0));case 19:this.setState({isLoading:!1});case 20:case"end":return e.stop()}},e,this,[[1,16]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleClear",value:function(){this.setState({categoryId:0,categoryName:""})}},{key:"handlePaging",value:function(e){var t=this.state,a=t.pagingCount,n=t.totalCount,r=this.state.pagingIndex;"next"===e&&(r+1)*a<n?r+=1:"prev"===e&&0!==r&&(r-=1),this.setState({pagingIndex:r})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.categoryId,s=e.categoryName,c=e.ListCategory;return r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column"},r.a.createElement(ce,{isLoading:t,categoryId:l,categoryName:s,handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleDelete:this.handleDelete,handleClear:this.handleClear})),r.a.createElement("div",{className:"column"},r.a.createElement(se,{isLoading:t,pagingIndex:a,pagingCount:n,totalCount:i,ListCategory:c,bindCategory:this.bindCategory,handlePaging:this.handlePaging})))}}]),t}(n.Component),ue=function(e){var t=e.isLoading,a=e.menuId,n=e.menuName,i=e.menuPrice,l=e.menuCategory,s=e.menuImage,c=e.ListCategory,o=e.handleChange,u=e.handleSubmit,d=e.handleDelete,m=e.handleClear;return r.a.createElement("form",{autoComplete:"off"},r.a.createElement("div",{className:"field columns is-mobile"},r.a.createElement("div",{className:"column flex flex-justify-center"},r.a.createElement("figure",{className:"image is-256x256"},r.a.createElement("img",{src:s||"https://bulma.io/images/placeholders/128x128.png",alt:"menuImageFile"}))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"file is-large is-boxed"},r.a.createElement("label",{htmlFor:"menuImage",className:"file-label"},r.a.createElement("input",{id:"menuImage",name:"menuImage",className:"file-input",type:"file",onChange:o}),r.a.createElement("span",{className:"file-cta"},r.a.createElement("span",{className:"file-icon"},r.a.createElement("i",{className:"far fa-image"})),r.a.createElement("span",{className:"file-label"},"Choose picture")))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"menuName"},"Nama Menu"),r.a.createElement("input",{type:"text",name:"menuName",className:t?"input is-loading":"input",value:n,onChange:o,disabled:t})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"menuPrice"},"Harga Menu"),r.a.createElement("input",{type:"text",name:"menuPrice",className:"input",value:i,onChange:o})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"menuPrice"},"Kategori"),r.a.createElement("div",{className:t?"select is-fullwidth is-loading":"select is-fullwidth"},r.a.createElement("select",{onChange:o,name:"menuCategory",disabled:t,value:l},c.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:t?"button is-success is-loading":"button is-success",type:"submit",disabled:t||""===n,onClick:u},a>0?"Update":"Submit"),a>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",className:t?"button is-danger is-loading":"button is-danger",disabled:t,onClick:d},"Delete"),r.a.createElement("button",{className:t?"button is-loading":"button",type:"button",disabled:t,onClick:m},"Cancel")):r.a.createElement(r.a.Fragment,null)))},de=function(e){var t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.ListMenuFiltered,s=e.bindMenu,c=e.handlePaging;return r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"Nama Menu"),r.a.createElement("th",null,"Kategori"),r.a.createElement("th",null,"Harga"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,l.length>0?l.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement("figure",{className:"image is-64x64"},r.a.createElement("img",{src:e.image||"https://bulma.io/images/placeholders/64x64.png",alt:e.menu}))),r.a.createElement("td",{className:"v-align-center"},e.name),r.a.createElement("td",{className:"v-align-center"},e.category.name),r.a.createElement("td",{className:"v-align-center"},e.price),r.a.createElement("td",{className:"v-align-center"},r.a.createElement("button",{type:"button",className:"button is-info",onClick:function(){return s(e)}},r.a.createElement("i",{className:"fas fa-pencil-alt"}))))}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},t?r.a.createElement(J,null):"No Data"))),i>n?r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"5"},r.a.createElement("nav",{className:"pagination",role:"navigation","aria-label":"pagination"},0!==a?r.a.createElement("button",{type:"button",className:"pagination-previous",onClick:function(){c("prev")}},"Previous"):r.a.createElement(r.a.Fragment,null),(a+1)*n<i?r.a.createElement("button",{type:"button",className:"pagination-next",onClick:function(){c("next")}},"Next"):r.a.createElement(r.a.Fragment,null))))):r.a.createElement(r.a.Fragment,null))},me=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(y.a)(this,Object(C.a)(t).call(this))).state={isLoading:!1,pagingIndex:0,pagingCount:10,totalCount:0,menuId:0,menuName:"",menuPrice:"",menuCategory:0,menuImage:"",ListMenu:[],ListCategory:[]},e.bindMenu=e.bindMenu.bind(Object(O.a)(Object(O.a)(e))),e.handleChange=e.handleChange.bind(Object(O.a)(Object(O.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(O.a)(Object(O.a)(e))),e.handleDelete=e.handleDelete.bind(Object(O.a)(Object(O.a)(e))),e.handleClear=e.handleClear.bind(Object(O.a)(Object(O.a)(e))),e.handlePaging=e.handlePaging.bind(Object(O.a)(Object(O.a)(e))),e}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,this.bindMasterMenu();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),P("is-danger",[A(e.t0)]);case 9:this.setState({isLoading:!1});case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"bindMasterMenu",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i,l,s,c,o,u,d;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pagingIndex,n=t.pagingCount,r=t.menuCategory,this.setState({ListMenu:[],ListCategory:[]}),i="\n      {\n        menusConnection (first: ".concat(n,", offset: ").concat(a*n,", isActive: true) {\n          totalCount,\n          ListMenu: menus {\n            id,\n            name,\n            price,\n            image,\n            category {\n              id\n            }\n          }\n        }\n\n        categoriesConnection (first: 10, isActive: true) {\n          totalCount,\n          categories {\n            id,\n            name\n          }\n        }\n      }\n    "),e.next=5,U.request(i);case 5:l=e.sent,s=l.menusConnection,c=s.totalCount,o=s.ListMenu,u=l.categoriesConnection.categories,d=u.sort(function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)}),this.setState({totalCount:c,menuCategory:r||d[0].id,ListMenu:o,ListCategory:d});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"bindMenu",value:function(e){this.setState({menuId:e.id,menuName:e.name,menuCategory:e.category.id,menuImage:e.image,menuPrice:e.price})}},{key:"handleChange",value:function(e){var t=this;if("file"===e.target.type&&e.target.files.length>0){var a=e.target.name,n=new FileReader;n.addEventListener("load",function(e){e.target.result.split(",")[1].length<=15e4?t.setState(Object(k.a)({},a,e.target.result)):P("is-danger",["File size must be below 500KB"])}),n.readAsDataURL(e.target.files[0])}else this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(w.a)(S.a.mark(function e(t){var a,n,r,i,l,s,c,o;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isLoading:!0}),e.prev=2,a=this.state,n=a.menuId,r=a.menuName,i=a.menuCategory,l=a.menuImage,s=a.menuPrice,c=n>0?"\n            mutation UpdateMenu($menuId: ID!, $menuName: String!, $menuPrice: Int!, $menuCategory: ID!, $menuImage: String!){\n              updateMenu(id: $menuId, name: $menuName, price: $menuPrice, categoryId: $menuCategory, image: $menuImage) {id}\n            }\n          ":"\n            mutation CreateMenu($menuName: String!, $menuPrice: Int!, $menuCategory: ID!, $menuImage: String!){\n              createMenu(name: $menuName, price: $menuPrice, categoryId: $menuCategory, image: $menuImage) {id}\n            }\n          ",o=[],le(r)&&o.push("Nama menu tidak boleh kosong"),ie(i)&&o.push("Category menu tidak boleh kosong"),ie(s)&&o.push("Harga tidak boleh kosong"),!(o.length>0)){e.next=11;break}throw new _(o);case 11:return e.next=13,U.request(c,{menuId:n,menuName:r,menuPrice:parseInt(s,10),menuCategory:i,menuImage:l});case 13:return e.next=15,this.bindMasterMenu();case 15:P("is-success",["Menu berhasil ".concat(n>0?"diupdate":"ditambah")]),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),P("is-danger",A(e.t0));case 21:this.setState({isLoading:!1});case 22:case"end":return e.stop()}},e,this,[[2,18]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),e.prev=1,t=this.state.menuId,a="\n        mutation DeleteMenu($menuId: ID!) {\n          deleteMenu(id: $menuId) {id}\n        }\n      ",n=[],ie(t)&&n.push("Error Menu Id"),!(n.length>0)){e.next=8;break}throw new _(n);case 8:return e.next=10,U.request(a,{menuId:t});case 10:return e.next=12,this.bindMasterMenu();case 12:this.handleClear(),P("is-success",["Menu berhasil dihapus"]),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),P("is-danger",A(e.t0));case 19:this.setState({isLoading:!1});case 20:case"end":return e.stop()}},e,this,[[1,16]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleClear",value:function(){this.setState({menuId:0,menuName:"",menuPrice:"",menuImage:""})}},{key:"handlePaging",value:function(e){var t=this.state,a=t.pagingCount,n=t.totalCount,r=this.state.pagingIndex;"next"===e&&(r+1)*a<n?r+=1:"prev"===e&&0!==r&&(r-=1),this.setState({pagingIndex:r})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.menuId,s=e.menuName,c=e.menuPrice,o=e.menuCategory,u=e.menuImage,d=e.ListMenu,m=e.ListCategory,h=d.filter(function(e){return e.category.id===o});return r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement(ue,{isLoading:t,menuId:l,menuName:s,menuCategory:o,menuPrice:c,menuImage:u,ListCategory:m,handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleDelete:this.handleDelete,handleClear:this.handleClear})),r.a.createElement("div",{className:"column"},r.a.createElement(de,{isLoading:t,pagingIndex:a,pagingCount:n,totalCount:i,ListMenuFiltered:h,bindMenu:this.bindMenu,handlePaging:this.handlePaging})))}}]),t}(n.Component),he=a(43),ge=function(e){var t=e.ListInvoice,a=t.map(function(e){return e.total}).reduce(function(e,t){return e+t});t=t.map(function(e){var t=[];return e.invoice_details.forEach(function(e){for(var a="* ".concat(e);a.length>50;)t.push(a.slice(0,50)),a="  ".concat(a.slice(50));t.push(a)}),{invoice_date:e.invoice_date,id:e.id,total:z()(e.total).format("0,0"),invoice_details:t.join("\n")}});var n=new V.a("potrait","mm","a4");return n.setFontSize(12),n.setTextColor("#000"),n.setFont("courier"),n.text("Total Income: Rp ".concat(z()(a).format("0,0")),16,30),n.autoTable([{title:"Date",dataKey:"invoice_date"},{title:"Invoice",dataKey:"id"},{title:"Menu",dataKey:"invoice_details"},{title:"Total",dataKey:"total"}],Object(he.a)(t),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{didDrawPage:e||"",showHead:null===(arguments.length>4&&void 0!==arguments[4]?arguments[4]:null),margin:{top:30,right:a||15,bottom:44,left:n||15},startY:null===t?35:t+5,tableLineColor:[0,0,0],tableLineWidth:.1,styles:{font:"courier",fontSize:8,textColor:[0,0,0],lineColor:[44,62,80],lineWidth:.25},headStyles:{fillColor:[255,255,255],lineWidth:0},bodyStyles:{fillColor:[255,255,255],lineWidth:0},alternateRowStyles:{fillColor:[240,240,240]}}}(function(e){n.setFontSize(14),n.setTextColor("#000"),n.setFontStyle("bold"),n.text("Warteg Modern",e.settings.margin.left+15,15),n.setFontSize(12),n.setTextColor("#808080"),n.setFontStyle("normal"),n.text("Masakan Mother",e.settings.margin.left+15,21)})),RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini").test(navigator.userAgent)?(window.open(n.output("bloburl"),"_blank"),r.a.createElement(r.a.Fragment,null)):r.a.createElement("embed",{id:"output",type:"application/pdf",src:n.output("datauristring")})},be=a(42),pe=a.n(be),ve=(a(76),function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){pe.a.attach('[type="date"]',{displayMode:"dialog",showHeader:!1,showFooter:!1,dateFormat:"DD MMM YYYY"})}},{key:"render",value:function(){var e=this.props.componentId;return r.a.createElement("input",{id:e,name:e,type:"date",className:"input is-fullwidth"})}}]),t}(n.Component)),fe=function(e){var t=e.monthList,a=e.selectedPeriodType,n=e.selectedMonth,i=e.selectedYear,l=e.ListCategory,s=e.handleChange,c=e.handleGenerateReport;return r.a.createElement("form",null,r.a.createElement("div",{className:"flex flex-gap-hor-1rem"},r.a.createElement("div",{className:"flex-1 field"},r.a.createElement("label",{htmlFor:"selectedPeriodType",className:"field-label is-normal"},"Period Type:"),r.a.createElement("div",{className:"field-body"},r.a.createElement("span",{className:"select is-fullwidth"},r.a.createElement("select",{name:"selectedPeriodType",value:a,onChange:s},r.a.createElement("option",{value:"daily"},"Daily"),r.a.createElement("option",{value:"monthly"},"Monthly"),r.a.createElement("option",{value:"yearly"},"Yearly"))))),r.a.createElement("div",{className:"flex-1 field flex flex-gap-hor-1rem"},r.a.createElement("div",{className:"daily"===a?"flex-1":"none"},r.a.createElement("label",{htmlFor:"selectedDaily"},"Selected Daily"),r.a.createElement("div",{className:"field-body bulma-calendar-fullwidth"},r.a.createElement(ve,{componentId:"selectedDaily"}))),r.a.createElement("div",{className:"monthly"===a?"flex-1":"none"},r.a.createElement("label",{htmlFor:"selectedMonth"},"Selected Month"),r.a.createElement("div",{className:"field-body"},r.a.createElement("span",{className:"select is-fullwidth"},r.a.createElement("select",{name:"selectedMonth",value:n,onChange:s},t.map(function(e){return r.a.createElement("option",{key:e},e)}))))),r.a.createElement("div",{className:"monthly"===a||"yearly"===a?"flex-1":"none"},r.a.createElement("label",{htmlFor:"selectedMonth"},"Selected Year"),r.a.createElement("div",{className:"field-body"},r.a.createElement("span",{className:"select is-fullwidth"},r.a.createElement("select",{name:"selectedYear",value:i,onChange:s},["2019"].map(function(e){return r.a.createElement("option",{key:e},e)}))))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"selectedMonth"},"Selected Category"),r.a.createElement("div",{className:"field-body"},r.a.createElement("span",{className:"select"},r.a.createElement("select",{name:"selectedMonth",value:n,onChange:s},r.a.createElement("option",{key:"0"},"All"),l.map(function(e){return r.a.createElement("option",{key:e.id},e.name)}))))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"button",className:"button is-primary",onClick:c},"Generate Report"))))},Ee=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(y.a)(this,Object(C.a)(t).call(this))).state={monthList:[],selectedPeriodType:"yearly",selectedMonth:ae()().format("MMMM"),selectedYear:ae()().format("YYYY"),ListCategory:[],ListInvoice:[]},e.handleChange=e.handleChange.bind(Object(O.a)(Object(O.a)(e))),e.handleGenerateReport=e.handleGenerateReport.bind(Object(O.a)(Object(O.a)(e))),e}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"\n      {\n        categoriesConnection(isActive: true) {\n          categories {\n            id,\n            name\n          }\n        }\n      }\n    ",e.next=3,U.request("\n      {\n        categoriesConnection(isActive: true) {\n          categories {\n            id,\n            name\n          }\n        }\n      }\n    ");case 3:for(t=e.sent,a=t.categoriesConnection.categories,n=a.sort(function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)}),r=[],i=1;i<=12;i+=1)r.push(ae()(i,"M").format("MMMM"));this.setState({ListCategory:n,monthList:r});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){"selectedMonth"!==e.target.name&&"selectedPeriodType"!==e.target.name||this.setState({ListInvoice:[]}),this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"handleGenerateReport",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i,l,s,c,o;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.selectedPeriodType,n=t.selectedMonth,r=t.selectedYear,i=document.getElementById("selectedDaily").value,l="","","daily"===a?(l=ae()(i,"DD MMM YYYY").format("x"),l):"monthly"===a?(l=ae()("01 ".concat(n,"} ").concat(r),"DD MMMM YYYY").format("x"),ae()(l,"x").add("1","month").add("-1","day").format("x")):"yearly"===r&&(l=ae()("01 Jan ".concat(r),"DD MMM YYYY").format("x"),ae()("31 Dec ".concat(r),"DD MMM YYYY").format("x")),'\n      {\n        invoicesConnection(isActive: true, sortBy: { field: "id", order: "desc" }) {\n          invoices {\n            id,\n            discount,\n            total,\n            created_date,\n            modified_date,\n            invoice_details {\n              menu {\n                name\n              }\n            }\n          }\n        }\n      }\n    ',e.next=8,U.request('\n      {\n        invoicesConnection(isActive: true, sortBy: { field: "id", order: "desc" }) {\n          invoices {\n            id,\n            discount,\n            total,\n            created_date,\n            modified_date,\n            invoice_details {\n              menu {\n                name\n              }\n            }\n          }\n        }\n      }\n    ');case 8:s=e.sent,c=s.invoicesConnection.invoices,o=c.map(function(e){return{id:e.id,discount:e.discount,total:e.total,invoice_date:ae()(e.modified_date||e.created_date,"x").format("DD/MM/YYYY hh:mm A"),invoice_details:e.invoice_details.map(function(e){return e.menu.name})}}),this.setState({ListInvoice:o});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.monthList,a=e.selectedPeriodType,n=e.selectedMonth,i=e.selectedYear,l=e.ListCategory,s=e.ListInvoice;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,{monthList:t,selectedPeriodType:a,selectedMonth:n,selectedYear:i,ListCategory:l,handleChange:this.handleChange,handleGenerateReport:this.handleGenerateReport}),r.a.createElement("div",{className:"m-t-1"}),s.length>0?r.a.createElement(ge,{ListInvoice:s}):r.a.createElement(r.a.Fragment,null))}}]),t}(n.Component),ye=function(e){var t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.ListStoreUserLevel,s=e.ListUser,c=e.bindStoreUser,o=e.handlePaging;return r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Level"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,s.length>0?s.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.username),r.a.createElement("td",null,l.filter(function(t){return t.level===e.level})[0].name),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"button is-info",onClick:function(){return c(e)}},r.a.createElement("i",{className:"fas fa-pencil-alt"}))))}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},t?r.a.createElement(J,null):"No data"))),i>n?r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},r.a.createElement("nav",{className:"pagination",role:"navigation","aria-label":"pagination"},0!==a?r.a.createElement("button",{type:"button",className:"pagination-previous",onClick:function(){o("prev")}},"Previous"):r.a.createElement(r.a.Fragment,null),(a+1)*n<i?r.a.createElement("button",{type:"button",className:"pagination-next",onClick:function(){o("next")}},"Next"):r.a.createElement(r.a.Fragment,null))))):r.a.createElement(r.a.Fragment,null))},Ce=function(e){var t=e.isLoading,a=e.ListStoreUserLevel,n=e.storeUserId,i=e.storeUserName,l=e.storeUserLevel,s=e.handleChange,c=e.handleSubmit,o=e.handleDelete,u=e.handleClear;return r.a.createElement("form",{autoComplete:"off"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"storeUserName",className:"label"},"Login Username"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"storeUserName",className:"input",type:"text",placeholder:"Username",value:i,onChange:s}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"storeUserLevel",className:"label"},"User Level"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select is-fullwidth"},r.a.createElement("select",{onChange:s,name:"storeUserLevel",disabled:t,value:l},a.map(function(e){return r.a.createElement("option",{key:e.level,value:e.level},e.name)}))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"storeUserPassword",className:"label"},"Login Password"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"storeUserPassword",id:"storeUserPassword",className:"input",type:"password",placeholder:"Password"}))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:t?"button is-success is-loading":"button is-success",type:"submit",disabled:t||""===i,onClick:c},n>0?"Update":"Submit"),n>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:t?"button is-danger is-loading":"button is-danger",type:"submit",disabled:t,onClick:o},"Delete"),r.a.createElement("button",{className:t?"button is-loading":"button",type:"button",onClick:u},"Cancel")):r.a.createElement(r.a.Fragment,null)))},Ne=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(y.a)(this,Object(C.a)(t).call(this))).state={isLoading:!1,pagingIndex:0,pagingCount:5,totalCount:0,ListStoreUserLevel:[{level:0,name:"Admin"},{level:1,name:"Cashier"},{level:2,name:"Staff"}],storeUserId:0,storeUserName:"",storeUserLevel:0,ListUser:[]},e.bindStoreUser=e.bindStoreUser.bind(Object(O.a)(Object(O.a)(e))),e.handleChange=e.handleChange.bind(Object(O.a)(Object(O.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(O.a)(Object(O.a)(e))),e.handleDelete=e.handleDelete.bind(Object(O.a)(Object(O.a)(e))),e.handleClear=e.handleClear.bind(Object(O.a)(Object(O.a)(e))),e.handlePaging=e.handlePaging.bind(Object(O.a)(Object(O.a)(e))),e}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,this.bindMasterStoreUser();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),P("is-danger",A(e.t0));case 9:this.setState({isLoading:!1});case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"bindMasterStoreUser",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ListUser:[]}),"\n    {\n      usersConnection(isActive: true) {\n        totalCount,\n        ListUser: users{\n          id,\n          username,\n          level\n        }\n      }\n    }",e.next=4,U.request("\n    {\n      usersConnection(isActive: true) {\n        totalCount,\n        ListUser: users{\n          id,\n          username,\n          level\n        }\n      }\n    }");case 4:t=e.sent,a=t.usersConnection.ListUser,this.setState({ListUser:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"bindStoreUser",value:function(e){this.setState({storeUserId:e.id,storeUserLevel:e.level,storeUserName:e.username})}},{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i,l,s;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),e.prev=1,t=this.state,a=t.storeUserId,n=t.storeUserName,r=t.storeUserLevel,i=document.getElementById("storeUserPassword").value,l=a>0?"\n            mutation UpdateUser($storeUserId: ID!, $storeUserName: String!, $storeUserLevel: Int!, $storeUserPassword: String!) {\n              updateUser(id: $storeUserId, username: $storeUserName, level: $storeUserLevel, password: $storeUserPassword) {id}\n            }\n          ":"\n            mutation CreateUser($storeUserName: String!, $storeUserLevel: Int!, $storeUserPassword: String!) {\n              createUser(username: $storeUserName, level: $storeUserLevel, password: $storeUserPassword) {id}\n            }\n          ",s=[],le(n)&&s.push("Username tidak boleh kosong"),!(s.length>0)){e.next=9;break}throw new _(s);case 9:return e.next=11,U.request(l,{storeUserId:parseInt(a,10),storeUserName:n,storeUserLevel:parseInt(r,10),storeUserPassword:i});case 11:return e.next=13,this.bindMasterStoreUser();case 13:this.handleClear(),P("is-success",["User berhasil ".concat(a>0?"diupdate":"ditambah")]),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),P("is-danger",A(e.t0));case 20:this.setState({isLoading:!1});case 21:case"end":return e.stop()}},e,this,[[1,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),e.prev=1,t=this.state.storeUserId,a="\n        mutation DeleteUser($storeUserId: ID!) {\n          deleteUser(id: $storeUserId) {id}\n        }\n      ",n=[],ie(t)&&n.push("Error Category Id"),!(n.length>0)){e.next=8;break}throw new _(n);case 8:return e.next=10,U.request(a,{storeUserId:parseInt(t,10)});case 10:return e.next=12,this.bindMasterStoreUser();case 12:this.handleClear(),P("is-warning",["User berhasil dihapus"]),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),P("is-danger",A(e.t0));case 19:this.setState({isLoading:!1});case 20:case"end":return e.stop()}},e,this,[[1,16]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleClear",value:function(){document.getElementById("storeUserPassword").value="",this.setState({storeUserId:0,storeUserName:""})}},{key:"handlePaging",value:function(e){var t=this.state,a=t.pagingCount,n=t.totalCount,r=this.state.pagingIndex;"next"===e&&(r+1)*a<n?r+=1:"prev"===e&&0!==r&&(r-=1),this.setState({pagingIndex:r})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.ListStoreUserLevel,s=e.storeUserId,c=e.storeUserName,o=e.storeUserLevel,u=e.ListUser;return r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column"},r.a.createElement(Ce,{isLoading:t,ListStoreUserLevel:l,storeUserId:s,storeUserName:c,storeUserLevel:o,handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleDelete:this.handleDelete,handleClear:this.handleClear})),r.a.createElement("div",{className:"column"},r.a.createElement(ye,{isLoading:t,pagingIndex:a,pagingCount:n,totalCount:i,ListStoreUserLevel:l,ListUser:u,bindStoreUser:this.bindStoreUser,handlePaging:this.handlePaging})))}}]),t}(n.Component),Oe=function(e){var t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.ListTable,s=e.bindTable,c=e.handlePaging;return r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Table Name"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,l.length>0?l.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"button is-info",onClick:function(){return s(e)}},r.a.createElement("i",{className:"fas fa-pencil-alt"}))))}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},t?r.a.createElement(J,null):"No data"))),i>n?r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},r.a.createElement("nav",{className:"pagination",role:"navigation","aria-label":"pagination"},0!==a?r.a.createElement("button",{type:"button",className:"pagination-previous",onClick:function(){c("prev")}},"Previous"):r.a.createElement(r.a.Fragment,null),(a+1)*n<i?r.a.createElement("button",{type:"button",className:"pagination-next",onClick:function(){c("next")}},"Next"):r.a.createElement(r.a.Fragment,null))))):r.a.createElement(r.a.Fragment,null))},xe=function(e){var t=e.isLoading,a=e.tableId,n=e.tableName,i=e.handleChange,l=e.handleSubmit,s=e.handleDelete,c=e.handleClear;return r.a.createElement("form",{autoComplete:"off"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"tableName",className:"label"},"Nama Table"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{name:"tableName",className:"input",type:"text",placeholder:"Nama Table",value:n,onChange:i}))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:t?"button is-success is-loading":"button is-success",type:"submit",disabled:t||""===n,onClick:l},a>0?"Update":"Submit"),a>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:t?"button is-danger is-loading":"button is-danger",type:"submit",disabled:t,onClick:s},"Delete"),r.a.createElement("button",{className:t?"button is-loading":"button",type:"button",onClick:c},"Cancel")):r.a.createElement(r.a.Fragment,null)))},Ie=[{url:"/",name:"Home",component:I,exact:!0,showOnHeader:!1,showOnHome:!1,level:2},{url:"/order",name:"Order",component:ee,exact:!0,showOnHeader:!0,showOnHome:!0,homeCardProperty:{cardColor:"yellow"},level:2},{url:"/order/invoiceId=:invoiceId?",name:"Order",component:ee,exact:!0,showOnHeader:!1,showOnHome:!1,allowEmployee:!1,level:1},{url:"/menu",name:"Menu",component:me,exact:!0,showOnHeader:!0,showOnHome:!0,homeCardProperty:{cardColor:"green"},level:0},{url:"/category",name:"Category",component:oe,exact:!0,showOnHeader:!0,showOnHome:!0,homeCardProperty:{cardColor:"blue"},level:0},{url:"/cashier",name:"Cashier",component:re,exact:!0,showOnHeader:!0,showOnHome:!0,homeCardProperty:{cardColor:"red"},level:1},{url:"/report",name:"Report",component:Ee,exact:!0,showOnHeader:!0,showOnHome:!0,homeCardProperty:{cardColor:"purple"},level:0},{url:"/table",name:"Table",component:function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(y.a)(this,Object(C.a)(t).call(this))).state={isLoading:!1,pagingIndex:0,pagingCount:5,totalCount:0,tableId:0,tableName:"",ListTable:[]},e.bindTable=e.bindTable.bind(Object(O.a)(Object(O.a)(e))),e.handleChange=e.handleChange.bind(Object(O.a)(Object(O.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(O.a)(Object(O.a)(e))),e.handleDelete=e.handleDelete.bind(Object(O.a)(Object(O.a)(e))),e.handleClear=e.handleClear.bind(Object(O.a)(Object(O.a)(e))),e.handlePaging=e.handlePaging.bind(Object(O.a)(Object(O.a)(e))),e}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,this.bindMasterTable();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),P("is-danger",A(e.t0));case 9:this.setState({isLoading:!1});case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"bindMasterTable",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i,l,s;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.pagingIndex,n=t.pagingCount,this.setState({ListTable:[]}),"\n    query ($first: Int!, $offset: Int!){\n      tablesConnection(first: $first, offset: $offset, isActive: true) {\n        totalCount,\n        ListTable: tables{\n          id,\n          name\n        }\n      }\n    }",e.next=5,U.request("\n    query ($first: Int!, $offset: Int!){\n      tablesConnection(first: $first, offset: $offset, isActive: true) {\n        totalCount,\n        ListTable: tables{\n          id,\n          name\n        }\n      }\n    }",{first:n,offset:n*a});case 5:r=e.sent,i=r.tablesConnection,l=i.totalCount,s=i.ListTable,this.setState({totalCount:l,ListTable:s});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"bindTable",value:function(e){this.setState({tableId:e.id,tableName:e.name})}},{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n,r,i;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),e.prev=1,t=this.state,a=t.tableId,n=t.tableName,r=a>0?"\n            mutation UpdateTable($tableId: ID!, $tableName: String!) {\n              updateTable(id: $tableId, name: $tableName) {id}\n            }\n          ":"\n            mutation CreateTable($tableName: String!){\n              createTable(name: $tableName) {id}\n            }\n          ",i=[],le(n)&&i.push("Nama menu tidak boleh kosong"),!(i.length>0)){e.next=8;break}throw new _(i);case 8:return e.next=10,U.request(r,{tableId:parseInt(a,10),tableName:n});case 10:return e.next=12,this.bindMasterTable();case 12:P("is-success",["Table berhasil ".concat(a>0?"diupdate":"ditambah")]),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),P("is-danger",A(e.t0));case 18:this.setState({isLoading:!1});case 19:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(w.a)(S.a.mark(function e(){var t,a,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),e.prev=1,t=this.state.tableId,a="\n        mutation DeleteTable($tableId: ID!) {\n          deleteTable(id: $tableId) {id}\n        }\n      ",n=[],ie(t)&&n.push("Error Table Id"),!(n.length>0)){e.next=8;break}throw new _(n);case 8:return e.next=10,U.request(a,{tableId:parseInt(t,10)});case 10:return e.next=12,this.bindMasterTable();case 12:this.handleClear(),P("is-warning",["Table berhasil dihapus"]),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),P("is-danger",A(e.t0));case 19:this.setState({isLoading:!1});case 20:case"end":return e.stop()}},e,this,[[1,16]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleClear",value:function(){this.setState({tableId:0,tableName:""})}},{key:"handlePaging",value:function(e){var t=this.state,a=t.pagingCount,n=t.totalCount,r=this.state.pagingIndex;"next"===e&&(r+1)*a<n?r+=1:"prev"===e&&0!==r&&(r-=1),this.setState({pagingIndex:r})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.pagingIndex,n=e.pagingCount,i=e.totalCount,l=e.tableId,s=e.tableName,c=e.ListTable;return r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column"},r.a.createElement(xe,{isLoading:t,tableId:l,tableName:s,handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleDelete:this.handleDelete,handleClear:this.handleClear})),r.a.createElement("div",{className:"column"},r.a.createElement(Oe,{isLoading:t,pagingIndex:a,pagingCount:n,totalCount:i,ListTable:c,bindTable:this.bindTable,handlePaging:this.handlePaging})))}}]),t}(n.Component),exact:!0,showOnHeader:!0,showOnHome:!0,homeCardProperty:{cardColor:"turquoise"},level:0},{url:"/user",name:"Store Users",component:Ne,exact:!0,showOnHeader:!0,showOnHome:!0,homeCardProperty:{cardColor:"orange"},level:0}];function ke(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length?t.pop().split(";").shift():""}var Le=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(C.a)(t).call(this,e))).handleLogout=function(){(0,a.props.fetchLogout)()},a.handleLogout=a.handleLogout.bind(Object(O.a)(Object(O.a)(a))),a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);e.length>0&&e.forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.target,a=document.getElementById(t);e.classList.toggle("is-active"),a.classList.toggle("is-active")})});var t=document.querySelectorAll(".navbar-menu .navbar-item");if(t.length>0){var a=document.getElementById("navbar");t.forEach(function(t){t.addEventListener("click",function(){a.classList.toggle("is-active"),e.forEach(function(e){e.classList.toggle("is-active")})})})}}},{key:"render",value:function(){var e=this.props.login;return r.a.createElement("nav",{className:"navbar is-dark",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("span",{className:"navbar-item",href:"https://bulma.io"},r.a.createElement(p.b,{to:"/"},r.a.createElement("img",{src:"https://bulma.io/images/bulma-logo-white.png",alt:"bulma logo",width:"112",height:"28"}))),r.a.createElement("span",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navbar",className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},Ie.filter(function(t){return t.showOnHeader&&t.level>=e}).map(function(e){return r.a.createElement(p.b,{key:e.url,className:"navbar-item",to:e.url},e.name)})),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"button",className:"button is-danger",onClick:this.handleLogout},"Log out"))))))}}]),t}(n.Component),Se={fetchLogout:function(){return function(e){document.cookie="login_state=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/",document.cookie="user_id=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/",document.cookie="jwtToken=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/",e({type:"LOGOUT_POST",payload:-1})}}},we=Object(s.b)(function(e){return{login:e.login.item.login}},Se)(Le),je=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(y.a)(this,Object(C.a)(t).call(this))).state={isLoading:!1,username:"",password:""},e.handleChange=e.handleChange.bind(Object(O.a)(Object(O.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(O.a)(Object(O.a)(e))),e}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,(0,this.props.setLogin)()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(w.a)(S.a.mark(function e(t){var a,n,r,i,l;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),a=this.state,n=a.username,r=a.password,i=this.props.fetchLogin,this.setState({isLoading:!0}),e.next=7,i({username:n,password:r});case 7:l=e.sent,this.mounted&&(l?P("is-success",["Success"]):P("is-danger",["Wrong Password"]),this.setState({isLoading:!1})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),P("is-danger",A(e.t0)),this.mounted&&this.setState({isLoading:!1});case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.username,n=e.password;return r.a.createElement("div",{className:"hero is-fullheight"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container has-text-centered"},r.a.createElement("div",{className:"column is-4 is-offset-4"},r.a.createElement($,null),r.a.createElement("h2",{className:"title"},"Login"),r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"username",type:"username",placeholder:"Username...",onChange:this.handleChange,value:a}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"password",type:"password",placeholder:"Password...",onChange:this.handleChange,value:n}))),r.a.createElement("button",{type:"submit",className:t?"button is-info is-block is-fullwidth is-loading":"button is-info is-block is-fullwidth",disabled:t,onClick:this.handleSubmit},"Login"))))))}}]),t}(n.Component),Me={fetchLogin:function(e){return function(){var t=Object(w.a)(S.a.mark(function t(a){var n,r,i,l,s,c,o,u;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.username,r=e.password,t.next=4,T.request("\n    mutation SignIn($username: String!, $password: String!){\n      signIn(username: $username, password: $password) {\n        token,\n        user {\n          id,\n          level\n        }\n      }\n    }\n  ",{username:n,password:r});case 4:return i=t.sent,l=i.signIn,s=l.token,c=l.user,o=c.id,u=c.level,document.cookie="login_state=".concat(u,"; max-age=").concat(604800,";samesite"),document.cookie="user_id=".concat(o,"; max-age=").concat(604800,";samesite"),document.cookie="jwtToken=".concat(s,"; max-age=").concat(604800,";samesite"),a({type:"LOGIN_POST",payload:{id:o,level:u}}),window.location.reload(),t.abrupt("return",!0);case 17:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},setLogin:function(){return function(){var e=Object(w.a)(S.a.mark(function e(t){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"0"!==ke("login_state")&&t({type:"LOGIN_POST",payload:parseInt(ke("login_state"),10)});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},De=Object(s.b)(null,Me)(je),Te=function(e){return r.a.createElement("div",{className:"flex flex-dir-column flex-align-center"},r.a.createElement("h1",{className:"title is-2"},"404"),r.a.createElement("h2",{className:"title is-3"},"Sorry Page Not Found"))},Ue=function(e){return{login:e.login.item.login}};Object(s.b)(Ue)(we);var Pe=Object(s.b)(Ue)(function(e){var t=e.login;return r.a.createElement(p.a,null,r.a.createElement(r.a.Fragment,null,t>=0?r.a.createElement(r.a.Fragment,null,r.a.createElement(we,null),r.a.createElement($,null),r.a.createElement("div",{className:"container is-fluid"},r.a.createElement(v.c,null,Ie.filter(function(e){return e.level>=t}).map(function(e){return r.a.createElement(v.a,{key:e.url,path:e.url,exact:e.exact,component:e.component})}),r.a.createElement(v.a,{path:"*",component:Te})))):r.a.createElement(De,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(s.a,{store:b},r.a.createElement(Pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[44,1,2]]]);
//# sourceMappingURL=main.63581c84.chunk.js.map